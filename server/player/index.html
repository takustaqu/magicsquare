<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<script src="https://cdn.socket.io/socket.io-1.0.6.js"></script>
	<script src="/lib/jquery-2.1.4.min.js"></script>
	<script src="/lib/sylvester.js"></script>
	<script src="/scripts/transform.js"></script>
	<link rel="stylesheet" href="/styles/player.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

	<title></title>
</head>
<body data-screen-name="main">

<div id="stage">
	<!-- <img src="/images/fire-sample.jpg" alt="" style="mix-blend-mode: color-burn;position:relative;z-index:100;"> -->
	<!-- <img src="/images/fire-effect.gif" alt="" style="mix-blend-mode: color-burn;position:relative;z-index:100;"> -->
	<div class="score">
		<ul>
			<li class="player-1">
				<div class="win"><i class="fa fa-thumbs-up"></i><span class="num">999</span></div>
				<div class="lose"><i class="fa fa-thumbs-down"></i><span class="num">999</span></div>
			</li>
			<li class="player-2">
				<div class="win"><i class="fa fa-thumbs-up"></i><span class="num">999</span></div>
				<div class="lose"><i class="fa fa-thumbs-down"></i><span class="num">999</span></div>
			</li>
		</ul>
	</div>
	<div class="base player-1">
		<div class="magicsquare closed">
			<img src="/images/type1/circle.png" alt="" class="spinning">
		</div>
	</div>
	<div class="base player-2">
		<div class="magicsquare closed">
			<img src="/images/type1/circle.png" alt="" class="spinning">
		</div>
	</div>

</div>


<script>

$(function(){
	
	var screenName = $("body").attr("data-screen-name");

	var s = io.connect('/',{transports:[ 'websocket']});
	s.on("calibrate", function (data) {
		if(screenName != data.target){
			return false
		}else{
			setTransform($("#stage"),data.axises,true)
		}
	});
	
	s.on("commands", function (data) {
		switch(data.command){
			case "open":
				openSquare(parseInt(data.player));
				break;
			case "close":
				closeSquare(parseInt(data.player));
				break;
		}
	});

	var $squares = [$(".base.player-1 .magicsquare"),$(".base.player-2 .magicsquare")];

	function openSquare(target){
	  $squares[parseInt(target)].addClass("rotateIn").removeClass("rotateOut").removeClass("closed");
	}

	function closeSquare(target){
	  $squares[parseInt(target)].removeClass("rotateIn").addClass("rotateOut");
	}


	
});
	
</script>
	
</body>
</html>